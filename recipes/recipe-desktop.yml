---
# yaml-language-server: $schema=https://schema.blue-build.org/recipe-v1.json
name: vedaos
description: This is my personal OS image.
base-image: ghcr.io/ublue-os/bazzite-gnome-nvidia-open
image-version: stable

modules:
  - type: dnf
    repos:
      cleanup: true
      files:
        - https://repository.mullvad.net/rpm/stable/mullvad.repo
        - https://packages.microsoft.com/yumrepos/vscode/config.repo
        - https://download.docker.com/linux/fedora/docker-ce.repo
    optfix:
      - "Mullvad VPN"
    install:
      packages:
        - repo: vscode-yum
          packages:
            - code
        - repo: docker-ce-stable
          packages:
            - containerd.io
            - docker-buildx-plugin
            - docker-ce
            - docker-ce-cli
            - docker-compose-plugin
        - android-tools
        - python3-ramalama
        - qemu-kvm
        - rclone
        - libcgroup
        - mullvad-vpn

  - type: systemd
    system:
      enabled:
        - docker.socket
        - podman.socket
        - mullvad-daemon.service
  
  - type: files
    files:
      - source: system_files/desktop
        destination: /
    
  - type: script
    snippets:
      - "dnf5 clean all"

  - type: signing
